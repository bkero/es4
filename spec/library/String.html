= String classes =

<pre>
FILE:                       spec/library/String.html
DRAFT STATUS:               DRAFT 1 - ROUGH - 2007-09-20
REVIEWED AGAINST ES3:       NO
REVIEWED AGAINST ERRATA:    NO
REVIEWED AGAINST BASE DOC:  NO
REVIEWED AGAINST PROPOSALS: NO
REVIEWED AGAINST CODE:      NO
</pre>

<P> ECMAScript provides a primitive string representation in the class
''string''.  It is primitive in the sense that this representation is
directly operated upon by operators of the language, and in the sense
that it is a final and non-dynamic class for which ECMAScript
implementations may provide efficient representations.

<P> ECMAScript also provides the class ''String'', which is a dynamic
non-final class that holds ''string'' values.  Instances of ''String''
are converted to ''string'' when operated upon by operators of the
language.


<h2 id="type AnyString"> The type ''AnyString'' </h2>

<P> The type ''AnyString'' is a union type that contains the two
built-in string types.  By standard subtyping rules it also includes
all classes that extend ''String''.

<INCLUDE file="String.es" name="__ES4__ type AnyString">


<H1 id="class String"> The class ''String'' </h1>

<P>The class ''String'' is a dynamic, nullable, non-final subclass of
''Object''.  It is a container for ''string'' values.  Instances of
''String'' are converted to ''string'' when operated upon by the
operators of the language.

<P> The class ''String'' can be extended and the extending classes can
provide novel representations for string values.

=== Synopsis ===

<P> The class ''String'' provides the following interface:

<FIXME> Optional arguments need to be handled better in these interfaces.

{{{
dynamic class String
{
    <SIGNATURE file="String.es" name="function String">
    <SIGNATURE file="String.es" name="static meta function invoke">

    <SIGNATURE file="String.es" name="static function fromCharCode">
    <SIGNATURE file="String.es" name="static function charAt">
    <SIGNATURE file="String.es" name="static function charCodeAt">
    <SIGNATURE file="String.es" name="static function concat">
    <SIGNATURE file="String.es" name="static function indexOf">
    <SIGNATURE file="String.es" name="static function lastIndexOf">
    <SIGNATURE file="String.es" name="static function localeCompare">
    <SIGNATURE file="String.es" name="static function match">
    <SIGNATURE file="String.es" name="static function parseJSON">
    <SIGNATURE file="String.es" name="static function replace">
    <SIGNATURE file="String.es" name="static function search">
    <SIGNATURE file="String.es" name="static function slice">
    <SIGNATURE file="String.es" name="static function split">
    <SIGNATURE file="String.es" name="static function substring">
    <SIGNATURE file="String.es" name="static function toLowerCase">
    <SIGNATURE file="String.es" name="static function toLocaleLowerCase">
    <SIGNATURE file="String.es" name="static function toUpperCase">
    <SIGNATURE file="String.es" name="static function toLocaleUpperCase">
    <SIGNATURE file="String.es" name="static function trim">

    static const length: uint = 1

    <SIGNATURE file="String.es" name="override intrinsic function toString">
    <SIGNATURE file="String.es" name="override intrinsic function toJSONString">
    <SIGNATURE file="String.es" name="override intrinsic function valueOf">

    <SIGNATURE file="String.es" name="intrinsic function charAt">
    <SIGNATURE file="String.es" name="intrinsic function charCodeAt">
    <SIGNATURE file="String.es" name="intrinsic function concat">
    <SIGNATURE file="String.es" name="intrinsic function indexOf">
    <SIGNATURE file="String.es" name="intrinsic function lastIndexOf">
    <SIGNATURE file="String.es" name="intrinsic function localeCompare">
    <SIGNATURE file="String.es" name="intrinsic function match">
    <SIGNATURE file="String.es" name="intrinsic function parseJSON">
    <SIGNATURE file="String.es" name="intrinsic function replace">
    <SIGNATURE file="String.es" name="intrinsic function search">
    <SIGNATURE file="String.es" name="intrinsic function slice">
    <SIGNATURE file="String.es" name="intrinsic function split">
    <SIGNATURE file="String.es" name="intrinsic function substring">
    <SIGNATURE file="String.es" name="intrinsic function toLowerCase">
    <SIGNATURE file="String.es" name="intrinsic function toLocaleLowerCase">
    <SIGNATURE file="String.es" name="intrinsic function toUpperCase">
    <SIGNATURE file="String.es" name="intrinsic function toLocaleUpperCase">
    <SIGNATURE file="String.es" name="intrinsic function trim">

    <SIGNATURE file="String.es" name="function get length">
    <SIGNATURE file="String.es" name="meta function get">
}
}}}

<P> The ''String'' prototype object provides the following direct properties:

<FIXME> Optional arguments need to be handled better in these interfaces.

{{{
    toString:          function (this:Strings) <LDOTS>
    toJSONString:      function (this:Strings, pretty=false) <LDOTS>
    valueOf:           function (this:Strings) <LDOTS>
    charAt:            function (pos) <LDOTS>
    charCodeAt:        function (pos) <LDOTS>
    concat:            function (...strings) <LDOTS>
    indexOf:           function (searchString, pos) <LDOTS>
    lastIndexOf:       function (searchString, pos) <LDOTS>
    localeCompare:     function (that) <LDOTS>
    match:             function (regexp) <LDOTS>
    parseJSON:         function () <LDOTS>
    replace:           function (searchValue, replaceValue) <LDOTS>
    search:            function (regexp) <LDOTS>
    slice:             function (start, end) <LDOTS>
    split:             function (separator, limit) <LDOTS>
    substring:         function (start, end) <LDOTS>
    toLowerCase:       function () <LDOTS>
    toLocaleLowerCase: function () <LDOTS>
    toUpperCase:       function () <LDOTS>
    toLocaleUpperCase: function () <LDOTS>
    trim:              function () <LDOTS>
}}}

<P> The ''String'' prototype object is also used as the prototype object for the
class ''string''.

== Methods on the ''String'' class object ==

=== new String ( value=<LDOTS> ) ===

<DESC> The ''String'' constructor initializes a new ''String'' object
by storing //value//, converted to ''string'', in a private property.
//Value// defaults to the empty string.

<IMPL> The ''String'' constructor is implementation-defined.

=== String( value=<LDOTS> ) ===

<DESC> The ''String'' class object called as a function converts
//value// to ''string'' (not to ''String'').  //Value// defaults to
the empty string.

<RETN> The ''String'' class object called as a function returns a
''string'' object.

<SHORTIMPL>
<INCLUDE file="String.es" name="static meta function invoke">

=== Methods that delegate to ''string'' methods ===

<DESC> The intrinsic methods ''charAt'', ''charCodeAt'', ''concat'',
''indexOf'', ''lastIndexOf'', ''localeCompare'', ''match'', ''parseJSON'',
''replace'', ''search'', ''slice'', ''split'', ''substring'',
''toLowerCase'', ''toLocaleLowerCase'', ''toUpperCase'',
''toLocaleUpperCase'', and ''trim'' all delegate 
to the corresponding static methods on the ''string'' class.

<RETN> These intrinsic methods return what their corresponding static
methods on the ''string'' class return.

<SHORTIMPL>
<INCLUDE file="String.es" name="static function charAt">
<INCLUDE file="String.es" name="static function charCodeAt">
<INCLUDE file="String.es" name="static function concat">
<INCLUDE file="String.es" name="static function indexOf">
<INCLUDE file="String.es" name="static function lastIndexOf">
<INCLUDE file="String.es" name="static function localeCompare">
<INCLUDE file="String.es" name="static function match">
<INCLUDE file="String.es" name="static function parseJSON">
<INCLUDE file="String.es" name="static function replace">
<INCLUDE file="String.es" name="static function search">
<INCLUDE file="String.es" name="static function slice">
<INCLUDE file="String.es" name="static function split">
<INCLUDE file="String.es" name="static function substring">
<INCLUDE file="String.es" name="static function toLowerCase">
<INCLUDE file="String.es" name="static function toLocaleLowerCase">
<INCLUDE file="String.es" name="static function trim">

== Methods on ''String'' instances ==

=== toString ===

<RETN> The intrinsic ''toString'' method returns this ''String''
object converted to ''string''.  For the class ''String'' itself this
results in the extraction of the private string value held by the
''String''.  Subclasses of ''String'' can represent strings
differently by overriding ''toString''.

<SHORTIMPL>
<INCLUDE file="String.es" name="override intrinsic function toString">

=== toJSONString ===

<DESC> The intrinsic ''toJSONString'' method convert this string object
to JSON format (<CITE ref="RFC4627">RFC 4627</CITE>).

<RETN> The intrinsic ''toJSONString'' method returns a string.

<SHORTIMPL>
<INCLUDE file="String.es" name="override intrinsic function toJSONString">

=== valueOf ===

<RETN> The intrinsic ''valueOf'' method returns the result of calling
the intrinsic ''toString'' method.

<SHORTIMPL>
<INCLUDE file="String.es" name="override intrinsic function valueOf">

=== Methods that delegate to ''string'' methods ===

<DESC> The intrinsic methods ''charAt'', ''charCodeAt'', ''concat'',
''indexOf'', ''lastIndexOf'', ''localeCompare'', ''match'', ''parseJSON'',
''replace'', ''search'', ''slice'', ''split'', ''substring'',
''toLowerCase'', ''toLocaleLowerCase'', ''toUpperCase'',
''toLocaleUpperCase'', and ''trim'' all delegate 
to the corresponding static methods on the ''string'' class, passing
''this'' as the first argument in all cases.

<RETN> These intrinsic methods return what their corresponding static
methods on the ''string'' class return.

<SHORTIMPL>
<INCLUDE file="String.es" name="intrinsic function charAt">
<INCLUDE file="String.es" name="intrinsic function charCodeAt">
<INCLUDE file="String.es" name="intrinsic function concat">
<INCLUDE file="String.es" name="intrinsic function indexOf">
<INCLUDE file="String.es" name="intrinsic function lastIndexOf">
<INCLUDE file="String.es" name="intrinsic function localeCompare">
<INCLUDE file="String.es" name="intrinsic function match">
<INCLUDE file="String.es" name="intrinsic function parseJSON">
<INCLUDE file="String.es" name="intrinsic function replace">
<INCLUDE file="String.es" name="intrinsic function search">
<INCLUDE file="String.es" name="intrinsic function slice">
<INCLUDE file="String.es" name="intrinsic function split">
<INCLUDE file="String.es" name="intrinsic function substring">
<INCLUDE file="String.es" name="intrinsic function toLowerCase">
<INCLUDE file="String.es" name="intrinsic function toLocaleLowerCase">
<INCLUDE file="String.es" name="intrinsic function toUpperCase">
<INCLUDE file="String.es" name="intrinsic function toLocaleUpperCase">
<INCLUDE file="String.es" name="intrinsic function trim">

<NOTE> The second parameter to the intrinsic method ''localeCompare''
and the first parameter to the intrinsic methods ''toLocaleLowerCase''
and ''toLocaleUpperCase'' are likely to be used in a future version of
this standard; it is recommended that implementations do not use these
parameter position for anything else.

== Methods on the ''String'' prototype object ==

=== toString ( ) ===

<RETN> Returns this result of invoking the intrinsic ''toString''
method.

<P> The ''toString'' function is not generic; it throws a
**TypeError** exception if its this value is not a ''String'' or
''string'' object.  Therefore, it cannot be transferred to other kinds
of objects for use as a method.

<SHORTIMPL>
<INCLUDE file="String.es" name="prototype function toString">

=== valueOf ( ) ===

<RETN> Returns this result of invoking the intrinsic ''valueOf'' method.

<P> The ''valueOf'' function is not generic; it throws a **TypeError**
exception if its this value is not a ''String'' or ''string'' object.
Therefore, it cannot be transferred to other kinds of objects for use
as a method.

<SHORTIMPL>
<INCLUDE file="String.es" name="prototype function valueOf">

=== Methods that delegate to ''string'' methods ===

<DESC> The methods ''charAt'', ''charCodeAt'', ''concat'',
''indexOf'', ''lastIndexOf'', ''localeCompare'', ''match'',
''parseJSON'', ''replace'', ''search'', ''slice'', ''split'',
''substring'', ''toLowerCase'', ''toLocaleLowerCase'',
''toUpperCase'', ''toLocaleUpperCase'', and ''trim'' on the ''String''
prototype object all delegate to the
corresponding static methods on the ''string'' class, passing ''this''
as the first argument in all cases.

<P> These methods are all generic, they do not require that their
''this'' object is a ''String''.  Therefore, they can be transferred
to other kinds of objects for use as methods.

<RETN> These methods on the ''String'' prototype object all return the
values returned by their corresponding static methods on the
''string'' class.

<SHORTIMPL>
<INCLUDE file="String.es" name="prototype function charAt">
<INCLUDE file="String.es" name="prototype function charCodeAt">
<INCLUDE file="String.es" name="prototype function concat">
<INCLUDE file="String.es" name="prototype function indexOf">
<INCLUDE file="String.es" name="prototype function lastIndexOf">
<INCLUDE file="String.es" name="prototype function localeCompare">
<INCLUDE file="String.es" name="prototype function match">
<INCLUDE file="String.es" name="prototype function parseJSON">
<INCLUDE file="String.es" name="prototype function replace">
<INCLUDE file="String.es" name="prototype function search">
<INCLUDE file="String.es" name="prototype function slice">
<INCLUDE file="String.es" name="prototype function split">
<INCLUDE file="String.es" name="prototype function substring">
<INCLUDE file="String.es" name="prototype function toLowerCase">
<INCLUDE file="String.es" name="prototype function toLocaleLowerCase">
<INCLUDE file="String.es" name="prototype function trim">


<NOTE> The second parameter to the prototype method ''localeCompare''
and the first parameter to the prototype methods ''toLocaleLowerCase''
and ''toLocaleUpperCase'' are likely to be used in a future version of
this standard; it is recommended that implementations do not use these
parameter position for anything else.
